
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Global Optimization Algorithms Comparison on 6 Trajectory Gym Problems &#8212; pykep  documentation</title>
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootswatch-3.3.4/yeti/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pykep-styles.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.4/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Credits" href="../credits.html" />
    <link rel="prev" title="Design of a Solar Electric Propulsion mission for the interplanetary cubesat MARGO" href="ex11.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head><body>

<div id="navbar" class="navbar navbar-inverse navbar-default navbar-fixed-top">
  <div class="container">
    <div class="navbar-header">
      <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">
        pykep</a>
      <span class="navbar-text navbar-version pull-left"><b></b></span>
    </div>

      <div class="collapse navbar-collapse nav-collapse">
        <ul class="nav navbar-nav">
          
          
          
          
        </ul>

        
          
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
        
        
          
            <ul class='nav navbar-nav navbar-right'>
                
  <li>
    <a href="ex11.html" title="Previous Chapter: Design of a Solar Electric Propulsion mission for the interplanetary cubesat MARGO"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Design of a Solar Elect...</span>
    </a>
  </li>
  <li>
    <a href="../credits.html" title="Next Chapter: Credits"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Credits &raquo;</span>
    </a>
  </li>
            </ul>
          
        
      </div>
  </div>
</div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../downloading.html">Download pykep source code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../system.html">Preparing your system to compile pykep</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Install pykep</a></li>
<li class="toctree-l1"><a class="reference internal" href="../documentation/index.html">Code Documentation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../credits.html">Credits</a></li>
</ul>

        </div>
      </div>
    <div class="col-md-9 content">
      
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container,
div.nbinput.container div.prompt,
div.nbinput.container div.input_area,
div.nbinput.container div[class*=highlight],
div.nbinput.container div[class*=highlight] pre,
div.nboutput.container,
div.nboutput.container div.prompt,
div.nboutput.container div.output_area,
div.nboutput.container div[class*=highlight],
div.nboutput.container div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    min-width: 7ex;
    padding-top: 0.4em;
    padding-right: 0.4em;
    text-align: right;
    flex: 0;
}
@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    padding: 0.4em;
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    background: #f5f5f5;
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}
</style>
<div class="section" id="Global-Optimization-Algorithms-Comparison-on-6-Trajectory-Gym-Problems">
<h1>Global Optimization Algorithms Comparison on 6 Trajectory Gym Problems<a class="headerlink" href="#Global-Optimization-Algorithms-Comparison-on-6-Trajectory-Gym-Problems" title="Permalink to this headline">¶</a></h1>
<p>In this tutorial, we will benchmark and compare three different global optimization algorithms taken from PyGMO (i.e., ACOmi, SGA, SADE, PSO) on six different global trajectory optimization problems (i.e., Cassini2, E-V-E 1 DSM, Messenger, Rosetta, E-M 5 imp, E-M 7 imp). All the problems are available in the Pykep’s trajectory gym, whereas all the algorithms are available from PyGMO.</p>
<p>In the code, we will see two nested loops: one that ranges through the different problems and another one that executes multiple runs of the same problem with a different and controlled seed. In this way, we run each problem ten times and we average the fitness values before plotting them. Furthermore, the initial population of each algorithm is the same for each run: so that we make sure that the algorithms start from the same baseline.</p>
<p>The final plots show the results in terms of fitness values as a function of function evaluations. In particular, the fitness values (i.e., the Delta-V required for the mission) is plotted in a semi-logarithmic scale.</p>
<p>Note that it is necessary to wait a few minutes before reproducing the plots.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>import pygmo as pg
import pykep as pk
import numpy as np
import matplotlib as mlp
import matplotlib.pyplot as plp
%matplotlib inline

fig, axes = plp.subplots(nrows=3, ncols=2, sharex=&#39;col&#39;, sharey=&#39;row&#39;, figsize=(15,15))
problems=[pk.trajopt.gym.cassini2, pk.trajopt.gym.eve_mga1dsm, pk.trajopt.gym.messenger, pk.trajopt.gym.rosetta, pk.trajopt.gym.em5imp, pk.trajopt.gym.em7imp]

#We now loop through the 6 problems:
for prob_number in range(0,6):
    vec=np.zeros(20)
    vec_2=np.zeros(20)
    vec_3=np.zeros(20)
    vec_4=np.zeros(20)
    #Now, we loop through 10 runs (each problem is run 10 times, and the results are averaged to remove the randomness)
    for x in range(1,11):
        udp = problems[prob_number]
        #I define the problems to be handled:
        prob=pg.problem(udp)
        prob_2=pg.problem(udp)
        prob_3=pg.problem(udp)
        prob_4=pg.problem(udp)
        #We define the algorithms (ACOmi, SGA, SADE and PSO):
        uda=pg.gaco(gen=1000, ker=15, q=1.0, oracle=1e9, acc=0.01, threshold=500, n_gen_mark=7)
        uda_2=pg.sga(gen=1000)
        uda_3=pg.sade(gen=1000)
        uda_4=pg.pso(gen=1000)

        algo=pg.algorithm(uda)
        algo_2=pg.algorithm(uda_2)
        algo_3=pg.algorithm(uda_3)
        algo_4=pg.algorithm(uda_4)
        #We generate the first random population of 20 individuals, with controlled seed:
        pop=pg.population(prob=prob, size=20, seed=x)
        pop_2=pg.population(prob=prob_2, size=20, seed=x)
        pop_3=pg.population(prob=prob_3, size=20, seed=x)
        pop_4=pg.population(prob=prob_4, size=20, seed=x)
        #We print the log every 50 generations:
        algo.set_verbosity(50)
        algo_2.set_verbosity(50)
        algo_3.set_verbosity(50)
        algo_4.set_verbosity(50)
        #We evolve the populations:
        pop=algo.evolve(pop)
        pop_2=algo_2.evolve(pop_2)
        pop_3=algo_3.evolve(pop_3)
        pop_4=algo_4.evolve(pop_4)
        #We extract the log:
        uda_gaco=algo.extract(pg.gaco)
        uda_sga=algo_2.extract(pg.sga)
        uda_sade=algo_3.extract(pg.sade)
        uda_pso=algo_4.extract(pg.pso)

        log_gaco=uda_gaco.get_log()
        log_sga=uda_sga.get_log()
        log_sade=uda_sade.get_log()
        log_pso=uda_pso.get_log()

        #We store the results in a vector
        i=0
        for entry in log_gaco:
            vec[i]+=entry[2]
            i=i+1
        i=0
        for entry_2 in log_sga:
            vec_2[i]+=entry_2[2]
            i=i+1
        i=0
        for entry_3 in log_sade:
            vec_3[i]+=entry_3[2]
            i=i+1
        i=0
        for entry_4 in log_pso:
            vec_4[i]+=entry_4[2]
            i=i+1
    #We average the stored results over the 10 runs:
    vec=np.true_divide(vec,10)
    vec_2=np.true_divide(vec_2,10)
    vec_3=np.true_divide(vec_3,10)
    vec_4=np.true_divide(vec_4,10)
    #We finally plot the results in a semilog plot, for each problem:
    if (prob_number==0):
            axes[0,0].semilogy([entry[1] for entry in log_gaco], vec,&#39;k--&#39;, label = &#39;ACOmi&#39;)
            axes[0,0].semilogy([entry[1] for entry in log_sga], vec_2,&#39;r--&#39;, label = &#39;SGA&#39;)
            axes[0,0].semilogy([entry[1] for entry in log_sade], vec_3, &#39;b--&#39;, label = &#39;SADE&#39;)
            axes[0,0].semilogy([entry[1] for entry in log_pso], vec_4, &#39;--&#39;, label = &#39;PSO&#39;)
            #axes[0,0].legend(loc=&#39;upper right&#39;)
            axes[0,0].set_title(&#39;Cassini 2: gen=1000, pop=20&#39;)

    elif (prob_number==1):
            axes[0,1].semilogy([entry[1] for entry in log_gaco], vec,&#39;k--&#39;, label = &#39;ACOmi&#39;)
            axes[0,1].semilogy([entry[1] for entry in log_sga], vec_2,&#39;r--&#39;, label = &#39;SGA&#39;)
            axes[0,1].semilogy([entry[1] for entry in log_sade], vec_3, &#39;b--&#39;, label = &#39;SADE&#39;)
            axes[0,1].semilogy([entry[1] for entry in log_pso], vec_4, &#39;--&#39;, label = &#39;PSO&#39;)
            #axes[0,1].legend(loc=&#39;upper right&#39;)
            axes[0,1].set_title(&#39;E-V-E MGA 1DSM: gen=1000, pop=20&#39;)

    elif (prob_number==2):
            axes[1,0].semilogy([entry[1] for entry in log_gaco], vec,&#39;k--&#39;, label = &#39;ACOmi&#39;)
            axes[1,0].semilogy([entry[1] for entry in log_sga], vec_2,&#39;r--&#39;, label = &#39;SGA&#39;)
            axes[1,0].semilogy([entry[1] for entry in log_sade], vec_3, &#39;b--&#39;, label = &#39;SADE&#39;)
            axes[1,0].semilogy([entry[1] for entry in log_pso], vec_4, &#39;--&#39;, label = &#39;PSO&#39;)
            #axes[1,0].legend(loc=&#39;upper right&#39;)
            axes[1,0].set_title(&#39;Messenger: gen=1000, pop=20&#39;)

    elif (prob_number==3):
            axes[1,1].semilogy([entry[1] for entry in log_gaco], vec,&#39;k--&#39;, label = &#39;ACOmi&#39;)
            axes[1,1].semilogy([entry[1] for entry in log_sga], vec_2,&#39;r--&#39;, label = &#39;SGA&#39;)
            axes[1,1].semilogy([entry[1] for entry in log_sade], vec_3, &#39;b--&#39;, label = &#39;SADE&#39;)
            axes[1,1].semilogy([entry[1] for entry in log_pso], vec_4, &#39;--&#39;, label = &#39;PSO&#39;)
            axes[1,1].legend(loc=&#39;upper right&#39;)
            axes[1,1].set_title(&#39;Rosetta: gen=1000, pop=20&#39;)


    elif (prob_number==4):
            axes[2,0].semilogy([entry[1] for entry in log_gaco], vec,&#39;k--&#39;, label = &#39;ACOmi&#39;)
            axes[2,0].semilogy([entry[1] for entry in log_sga], vec_2,&#39;r--&#39;, label = &#39;SGA&#39;)
            axes[2,0].semilogy([entry[1] for entry in log_sade], vec_3, &#39;b--&#39;, label = &#39;SADE&#39;)
            axes[2,0].semilogy([entry[1] for entry in log_pso], vec_4, &#39;--&#39;, label = &#39;PSO&#39;)
            #axes[2,0].legend(loc=&#39;upper right&#39;)
            axes[2,0].set_title(&#39;E-M 5 imp: gen=1000, pop=20&#39;)

    elif (prob_number==5):
            axes[2,1].semilogy([entry[1] for entry in log_gaco], vec,&#39;k--&#39;, label = &#39;ACOmi&#39;)
            axes[2,1].semilogy([entry[1] for entry in log_sga], vec_2,&#39;r--&#39;, label = &#39;SGA&#39;)
            axes[2,1].semilogy([entry[1] for entry in log_sade], vec_3, &#39;b--&#39;, label = &#39;SADE&#39;)
            axes[2,1].semilogy([entry[1] for entry in log_pso], vec_4, &#39;--&#39;, label = &#39;PSO&#39;)
            #axes[2,1].legend(loc=&#39;upper right&#39;)
            axes[2,1].set_title(&#39;E-M 7 imp: gen=1000, pop=20&#39;)

for ax in axes.flat:
    ax.set(xlabel=&#39;Fevals [-]&#39;, ylabel=&#39;Best [m/s]&#39;)
    ax.grid()
#We save the results to a .eps file:
plp.savefig(&quot;GTOP_database_pop20.jpg&quot;)
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/examples_ex13_1_0.png" src="../_images/examples_ex13_1_0.png" />
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2020, pykep Development Team.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.2.1.<br/>
    </p>
  </div>
</footer>
  </body>
</html>